name: Keep Vercel API Warm

on:
  schedule:
    # 10ë¶„ë§ˆë‹¤ ì‹¤í–‰ - Serverless Functionsë¥¼ ì›œ ìƒíƒœë¡œ ìœ ì§€
    - cron: '*/10 * * * *'

  # GitHub Actions íƒ­ì—ì„œ ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest

    steps:
      - name: Ping Movies API
        run: |
          echo "ğŸ”¥ Pinging os-sister Movies API..."

          # /api/movies ì—”ë“œí¬ì¸íŠ¸ë¥¼ í˜¸ì¶œí•˜ì—¬ Serverless Function ì›Œë°
          # ?category=popular: ì‹¤ì œ ì‚¬ìš© íŒ¨í„´ê³¼ ë™ì¼í•˜ê²Œ í˜¸ì¶œ
          # || exit 0: ì¼ì‹œì  ì‹¤íŒ¨í•´ë„ ì›Œí¬í”Œë¡œìš°ëŠ” ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬
          curl -f -s -o /dev/null \
            "https://os-sister.vercel.app/api/movies?category=popular" \
            || exit 0

          echo "âœ… API is now warm and ready!"

      - name: Show last ping time
        run: echo "â° Last pinged at $(date -u +'%Y-%m-%d %H:%M:%S UTC')"
